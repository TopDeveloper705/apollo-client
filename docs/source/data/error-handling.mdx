---
title: Client-side error handling
sidebar_title: Error handling
---

Apollo Client communicates with both your frontend and backend, which means it can encounter a variety of errors from both. It's important to handle errors correctly and show any relevant information to the user when an error occurs.

## Error types

The most common error types encountered by Apollo Client are described below.

#### GraphQL errors

These are errors related to the server-side execution of a GraphQL operation. They include syntax errors (e.g., a query was malformed), semantic errors (e.g., a query included a schema field that doesn't exist), and others.

When a GraphQL error occurs, it's included in the `errors` array of the server's response to Apollo Client. Apollo Client then adds those errors to [the `error.graphQLErrors` array returned by your `useQuery` call](./queries/#result) (or whichever hook you used).

GraphQL errors usually result in a `4xx` response status code, but some servers might respond with `200`.

##### Partial data with GraphQL errors

An operation that produces GraphQL errors might _also_ return **partial data**. This means that some (but not all) of the data your operation requested is included in your server's response. Apollo Client _ignores_ partial data by default, but you can override this behavior by [setting a GraphQL error policy](#graphql-error-policies).


#### Network errors

These are errors encountered while communicating with your GraphQL server, usually resulting in a `4xx` or `5xx` response status code (and no results).

When a network error occurs, Apollo Client adds it to [the `error.networkErrors` array returned by your `useQuery` call](./queries/#result) (or whichever hook you used).

#### Transaction errors

These are errors that occur in your back-end data stores while modifying data for a mutation.

#### UI errors

These are front-end errors that occur within your React components (or your other chosen view layer).

#### Apollo Client errors

These are errors that occur within Apollo Client itself.

## GraphQL error policies

When your server's response to a GraphQL operation includes an `errors` array, it might still include partial data in the `data` field:

```json
{
  "data": {
    "getInt": 12
  },
  "errors": [
    {
      "message": "Cannot query field \"getStrin\" on type \"Query\". Did you mean \"getString\"?",
    }
  ]
}
```

By default, Apollo Client throws away partial data and populates [the `error.graphQLErrors` array of your `useQuery` call](./queries/#result) (or whichever hook you're using). You can instead _use_ these partial results by defining an **error policy** for your operation.

Apollo Client supports the following error policies for an operation:

| Policy | Description |
|--------|-------------|
| `none` | `graphQLErrors` are treated the same as `networkErrors`, meaning all response `data` is ignored. |
| `ignore` | `graphQLErrors` are ignored (`error.graphQLErrors`  is _not_ populated), and any returned `data` is rendered as if no errors occurred. |
| `all` | Both `data` and `error.graphQLErrors` are populated, enabling you to render both partial results and error information. |

### Setting an error policy

Specify an error policy in the options object you provide your operation hook (such as `useQuery`), like so:

```tsx{9}
const MY_QUERY = gql`
  query WillFail {
    badField # This field produces one or more errors
    goodField # This field is populated successfully
  }
`;

function ShowingSomeErrors() {
  const { loading, error, data } = useQuery(MY_QUERY, { errorPolicy: 'all' });

  if (loading) return <span>loading...</span>
  return (
    <div>
      <h2>Good: {data.goodField}</h2>
      <pre>Bad: {error.graphQLErrors.map(({ message }, i) => (
        <span key={i}>{message}</span>
      ))}
      </pre>
    </div>
  );
}
```

## Handling network errors with Apollo Link

You can configure advanced handling of networking errors with [Apollo Link](../api/link/introduction/), a library that enables you to customize Apollo Client's network communication.

Specifically, you can add an `onError` link to your [link chain](../api/link/introduction/#composing-a-link-chain) that receives error details and acts on them accordingly.


### Example link

This `onError` link checks for `graphQLErrors` or a `networkError` in the server's response. If it finds either, it logs the details.

```js
import { onError } from "@apollo/client/link/error";

const errorLink = onError(({ graphQLErrors, networkError }) => {
  if (graphQLErrors)
    graphQLErrors.forEach(({ message, locations, path }) =>
      console.log(
        `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,
      ),
    );

  if (networkError) console.log(`[Network error]: ${networkError}`);
});
```

### Options

The `onError` link takes a function that's called in the event of an error. This function is passed an object with the following fields:

<table class="field-table">
  <thead>
    <tr>
      <th>Name /<br/>Type</th>
      <th>Description</th>
    </tr>
  </thead>

<tbody>
<tr>
<td>

###### `operation`

`Operation`
</td>
<td>

The details of the GraphQL operation that produced an error.

[See type definition](https://github.com/apollographql/apollo-client/blob/main/src/link/core/types.ts#L14-L21)
</td>
</tr>


<tr>
<td>

###### `response`

`ExecutionResult`
</td>
<td>

The (possibly modified) GraphQL result from the server, passed by the next link down the chain (i.e., the link closer to the terminating link).

[See type definition](https://github.com/graphql/graphql-js/blob/main/src/execution/execute.d.ts#L49-L57)
</td>
</tr>


<tr>
<td>

###### `graphQLErrors`

`ReadonlyArray<GraphQLError>`
</td>
<td>

An array of [GraphQL errors](#graphql-errors) that occurred while executing the operation, if any.

[See type definition](https://github.com/graphql/graphql-js/blob/main/src/error/GraphQLError.d.ts)

</td>
</tr>


<tr>
<td>

###### `networkError`

`Error | ServerError | ServerParseError`
</td>
<td>

A network error that occurred while attempting to execute the operation, if any.

</td>
</tr>


<tr>
<td>

###### `forward`

Function
</td>
<td>

A function that calls the next link down the chain. Calling `return forward(operation)` in your `onError` callback retries the request, returning a new observable for the upstream link to subscribe to.

</td>
</tr>

</tbody>
</table>

### Ignoring errors

If you want to conditionally ignore errors, you can set `response.errors = null;` within the error handler:

```js
onError(({ response, operation }) => {
  if (operation.operationName === "IgnoreErrorsQuery") {
    response.errors = null;
  }
})
```
